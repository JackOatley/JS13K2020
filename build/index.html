<!DOCTYPE html><html><head><style>body{margin:0px;overflow:hidden;user-select:none;}</style></head><body><canvas id='canvas'></canvas><script>(function(){'use strict';const l=2*Math.PI;var n=0,p=0;const q=document.getElementById("canvas");q.addEventListener("contextmenu",a=>a.preventDefault());var r={};
const t={x:0,y:0,l:0,m:0,pressed:[],i:[],f:[],o:()=>{q.addEventListener("mousemove",a=>{t.l=a.offsetX;t.m=a.offsetY;t.x=a.offsetX+n-q.width/2;t.y=a.offsetY+p-q.height/2});q.addEventListener("mousedown",a=>{t.f[a.which]||(t.pressed[a.which]=!0,t.f[a.which]=!0)});q.addEventListener("mouseup",a=>{t.f[a.which]&&(t.i[a.which]=!0,t.f[a.which]=!1)})},update:()=>{for(let a=0;a<t.pressed.length;a++)t.pressed[a]=!1,t.i[a]=!1}};const u=Math.PI,v=2*u;function x(a,b){return Math.atan2(b.y-a.y,b.x-a.x)}function y(a,b){return Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2))};function z(a){switch(a){case 0:return[100,100,100];case 1:return[0,255,0];case 2:return[255,0,0];case 3:return[0,0,255];case 4:return[255,255,0];default:return[0,0,0]}}function A(a){switch(a){case 0:return"neutral";case 1:return"green";case 2:return"red";case 3:return"blue";case 4:return"yellow";default:return"UNKNOWN"}};function B(a,b,c,d,f){const e=document.createElement("canvas");e.width=a;e.height=b;f(e.getContext("2d"));return{canvas:e,w:a,h:b,x:c,y:d}}function C(a,b){return B(2*a,2*a,a,a,c=>{c.fillStyle=b;c.beginPath();c.arc(a,a,a,0,v);c.fill()})}
const F=B(70,70,35,35,a=>{a.strokeStyle="#FFF";a.lineWidth=4;a.beginPath();a.arc(35,35,32,0,v);a.stroke()}),G=[C(16,"rgb(50,50,50)"),C(16,"rgb(0,255,0)"),C(16,"rgb(255,0,0)"),C(16,"rgb(0,0,255)"),C(16,"rgb(255,255,0)")],H=[C(2,"rgb(50,50,50)"),C(2,"rgb(0,255,0)"),C(2,"rgb(255,0,0)"),C(2,"rgb(0,0,255)"),C(2,"rgb(255,255,0)")];const I=[[],[],[],[],[]];function J(a,b,c,d,f){I[f].push({x:a,y:b,j:{x:c,y:d},angle:Math.random()*l,b:f})};const K=[];let L=0,M=0;function N(){t.pressed[1]&&(O=null);P.forEach(a=>a.update(void 0));0>=M--&&(P.forEach(a=>Q(a)),M+=8)}function R(){var a=S;a.lineWidth=2;P.forEach(b=>{if(b.target){const c=x(b,b.target),d=b.x+Math.cos(c)*(b.size+15);b=b.y+Math.sin(c)*(b.size+15);a.beginPath();a.arc(d,b,5,0,l);a.stroke()}})}function T(a,b){const c=P.find(d=>d.x===80*a&&d.y===80*b);return c?c:null}
function Q(a){let b=0;1<a.b&&(a.target=null,a.links.forEach(d=>{d.b!==a.b&&d.units<a.units&&(a.target=d);!a.target&&d.b===a.b&&d.units<d.c&&d.target!==a&&(a.target=d)}));if(0!==a.b&&(a.units<a.c&&(a.units+=.1),a.target))if(a.target.b===a.b){var c=Math.min(a.target.c-a.target.units,~~(a.units/8));1<c&&(b=c,a.units-=c,a.target.units+=c)}else if(1<a.units){c=~~a.units/8;const d=.8+c/a.target.units*.2;1<c&&(b=c,a.units-=c,a.target.units-=c*d,0>a.target.units&&(a.target.target=null,a.target.b=a.b,a.target.units=
a.units/2,a.units/=2))}for(c=0;c<b;c++)J(a.x,a.y,a.target.x,a.target.y,a.b)}
class U{constructor(a,b,c){this.id=L++;this.type=a;this.x=80*b;this.y=80*c;this.b=0;this.size=10+~~(10*Math.random());this.c=2*this.size+1;this.units=~~(Math.random()*this.c);this.links=[];this.target=null;this.selected=this.g=!1;P.push(this)}update(){this.g=40>y(this,t);t.pressed[1]&&1===this.b&&(this.selected=this.g)&&(O=this);t.pressed[3]&&this.g&&(O&&O.links.includes(this)?O.target=this:O===this&&(this.target=null))}}var O;function V(a){let b=0;P.forEach(c=>b+=(c.b===a)*c.units);return b}
function W(a){let b=0;P.forEach(c=>b+=(c.b===a)*c.c);return b}var P=[];const X=document.getElementById("canvas"),S=X.getContext("2d");document.addEventListener("keydown",a=>{a=a.key.toLowerCase();r[a]||(r[a]=!0)});document.addEventListener("keyup",a=>{a=a.key.toLowerCase();r[a]&&(r[a]=!1)});t.o();{let a=0,b=0;for(;100>P.length;)null===T(a,b)&&new U(0,a,b),a+=~~(3*Math.random())-1,b+=~~(3*Math.random())-1}
(function(a,b){n=a;p=b})(...function(){let a=1E6,b=0,c=1E6,d=0;P.forEach(f=>{a=Math.min(a,f.x);b=Math.max(b,f.x);c=Math.min(c,f.y);d=Math.max(d,f.y)});return[(a+b)/2,(c+d)/2]}());P.forEach(a=>{P.forEach(b=>{if(a!==b&&120>=y(a,b)){let c=!1;a.links.forEach(d=>{c|=0^d.links.some(f=>{{var e=a.x;var g=a.y,h=b.x,k=b.y,m=d.x,w=d.y,D=f.x;f=f.y;let E;E=(h-e)*(f-w)-(D-m)*(k-g);0===E?e=!1:(m=((f-w)*(D-e)+(m-D)*(f-g))/E,e=((g-k)*(D-e)+(h-e)*(f-g))/E,e=0<m&&1>m&&0<e&&1>e)}return e})});c||a.links.push(b)}})});
(function(){const a=[];P.forEach(b=>{b.links.forEach(c=>{const d=`${b.x},${b.y},${c.x},${c.y}`,f=`${c.x},${c.y},${b.x},${b.y}`;if(!a.includes(d)&&!a.includes(f)){const e=x(b,c);K.push(b.x+Math.cos(e)*b.size,b.y+Math.sin(e)*b.size,c.x-Math.cos(e)*c.size,c.y-Math.sin(e)*c.size);a.push(d,f)}})})})();{const a=P.length;for(let b,c=1;4>=c;c++){do b=~~(Math.random()*a);while(0!==P[b].b);P[b].b=c;P[b].size=20;P[b].units=20;P[b].c=41}}
(function Y(){if(X.width!==window.innerWidth||X.height!==window.innerHeight)console.log(...["resizing",window.innerWidth,window.innerHeight]),X.width=window.innerWidth,X.height=window.innerHeight;r.w&&(p-=8);r.a&&(n-=8);r.s&&(p+=8);r.d&&(n+=8);N();var b=I.length;for(var c=1;c<b;c++){var d=I[c],f=d.length;for(var e=0;e<f;e++){var g=d[e],h=g.angle-x(g,g.j)+u;g.angle-=(h-Math.floor(h/v)*v-u)/10;g.x+=2*Math.cos(g.angle);g.y+=2*Math.sin(g.angle);2>y(g,g.j)&&(h=I[g.b],h[h.indexOf(g)]=h[h.length-1],h.length--,
e--,f=d.length)}}for(var k in r);t.update();S.fillStyle="#000";S.fillRect(0,0,S.canvas.width,S.canvas.height);c=S.canvas;b=-n+c.width/2;c=-p+c.height/2;d=S;e=d.canvas.width;g=d.canvas.height;k=d.createLinearGradient(e/2,0,e/2,g);k.addColorStop(0,"#010121");k.addColorStop(1,"#010111");d.fillStyle=k;d.fillRect(0,0,e,g);d=S;e=d.canvas.width;g=d.canvas.height;k=(-n+e/2)%80;h=(-p+g/2)%80;d.strokeStyle="rgba(255,255,255,0.1)";d.lineWidth=1;for(d.beginPath();k<e;k+=40)d.moveTo(k,0),d.lineTo(k,g);for(;h<
g;h+=40)d.moveTo(0,h),d.lineTo(e,h);d.stroke();S.save();S.scale(1,1);S.translate(b,c);b=S;b.lineWidth=2;b.strokeStyle="rgba(187,187,255,0.5)";b.setLineDash([4,4]);c=K.length;b.beginPath();for(d=0;d<c;d+=4)b.moveTo(K[d],K[d+1]),b.lineTo(K[d+2],K[d+3]);b.stroke();b.setLineDash([]);b=S;c=P.length;d=n-b.canvas.width/2;e=n+b.canvas.width/2;g=p-b.canvas.height/2;k=p+b.canvas.height/2;for(h=0;h<c;h++)if(f=P[h],!(f.x<d||f.x>e||f.y<g||f.y>k)){var m=G[f.b],w=f.units/32;b.drawImage(m.canvas,f.x-m.x*w,f.y-m.y*
w,m.w*w,m.h*w);m=f.size/(32-4*f.g);b.drawImage(F.canvas,f.x-F.x*m,f.y-F.y*m,F.w*m,F.h*m)}O&&(c=O.x,d=O.y,e=O.size,g=6+Math.sin(performance.now()/100),b.strokeStyle="#FFF",b.lineWidth=4,b.beginPath(),b.arc(c,d,e+g,0,l),b.stroke());R();b=S;c=I.length;for(d=1;d<c;d++)for(e=H[d].canvas,g=I[d],k=g.length,h=0;h<k;h++)f=g[h],b.drawImage(e,f.x,f.y);S.restore();b=S;f=b.canvas.width/2-240-60;for(m=1;4>=m;f+=240,m++)c=b,d=m,e=f,c.textAlign="center",c.textBaseline="middle",c.font="16px monospace",c.fillStyle=
`rgba(${z(d).toString()},${1})`,c.fillText(`${A(d)} team`,e,25),c.fillStyle=`rgba(${z(d).toString()},${.2})`,g=c,k=e-80,h=10,160<2*h&&(h=80),75<2*h&&(h=37.5),g.beginPath(),g.moveTo(k+h,40),g.arcTo(k+160,40,k+160,115,h),g.arcTo(k+160,115,k,115,h),g.arcTo(k,115,k,40,h),g.arcTo(k,40,k+160,40,h),g.closePath(),c.fill(),c.fillStyle="#FFF",c.strokeStyle="#FFF",c.lineWidth=4,c.font="24px monospace",c.beginPath(),c.moveTo(e-7,95),c.lineTo(e+7,65),c.stroke(),c.textAlign="right",c.fillText(~~V(d),e-15,65),c.textAlign=
"left",c.fillText(~~W(d),e+15,95);requestAnimationFrame(Y)})();})()</script></body></html>

